<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>四.前端安全 | web面试题精选</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="个人总结的vuepress学习技术文档-语法">
    <meta name="keywords" content="vuepress,最新技术文档,vuepress语法,markdown语法">
    
    <link rel="preload" href="/web-interview/assets/css/0.styles.884e11ce.css" as="style"><link rel="preload" href="/web-interview/assets/js/app.7e1cd45a.js" as="script"><link rel="preload" href="/web-interview/assets/js/2.e1d7530f.js" as="script"><link rel="preload" href="/web-interview/assets/js/19.8df8bad8.js" as="script"><link rel="preload" href="/web-interview/assets/js/4.2abc1bb0.js" as="script"><link rel="prefetch" href="/web-interview/assets/js/10.56017cec.js"><link rel="prefetch" href="/web-interview/assets/js/11.1b6f017b.js"><link rel="prefetch" href="/web-interview/assets/js/12.941a8d45.js"><link rel="prefetch" href="/web-interview/assets/js/13.fe0a5713.js"><link rel="prefetch" href="/web-interview/assets/js/14.5f59b4d0.js"><link rel="prefetch" href="/web-interview/assets/js/15.2267941d.js"><link rel="prefetch" href="/web-interview/assets/js/16.828a3f57.js"><link rel="prefetch" href="/web-interview/assets/js/17.ee3fe08e.js"><link rel="prefetch" href="/web-interview/assets/js/18.903cebf9.js"><link rel="prefetch" href="/web-interview/assets/js/20.95d96844.js"><link rel="prefetch" href="/web-interview/assets/js/21.90b2597d.js"><link rel="prefetch" href="/web-interview/assets/js/22.71893005.js"><link rel="prefetch" href="/web-interview/assets/js/23.cfb13783.js"><link rel="prefetch" href="/web-interview/assets/js/24.d1a013b5.js"><link rel="prefetch" href="/web-interview/assets/js/25.5f7ebf65.js"><link rel="prefetch" href="/web-interview/assets/js/26.50044f2c.js"><link rel="prefetch" href="/web-interview/assets/js/27.5e557589.js"><link rel="prefetch" href="/web-interview/assets/js/28.24a14952.js"><link rel="prefetch" href="/web-interview/assets/js/29.54cbaafe.js"><link rel="prefetch" href="/web-interview/assets/js/3.04649557.js"><link rel="prefetch" href="/web-interview/assets/js/30.2f876fbf.js"><link rel="prefetch" href="/web-interview/assets/js/31.40c046c4.js"><link rel="prefetch" href="/web-interview/assets/js/32.ca1e44b5.js"><link rel="prefetch" href="/web-interview/assets/js/33.d7502a7c.js"><link rel="prefetch" href="/web-interview/assets/js/34.f2ed1a32.js"><link rel="prefetch" href="/web-interview/assets/js/35.55b2e31b.js"><link rel="prefetch" href="/web-interview/assets/js/36.a756f4b7.js"><link rel="prefetch" href="/web-interview/assets/js/37.958c0dcf.js"><link rel="prefetch" href="/web-interview/assets/js/38.c2bfc766.js"><link rel="prefetch" href="/web-interview/assets/js/39.b1f968ef.js"><link rel="prefetch" href="/web-interview/assets/js/40.c33559b1.js"><link rel="prefetch" href="/web-interview/assets/js/41.4b7bd7cb.js"><link rel="prefetch" href="/web-interview/assets/js/42.4f0104bf.js"><link rel="prefetch" href="/web-interview/assets/js/43.6b8a3e60.js"><link rel="prefetch" href="/web-interview/assets/js/44.e3d67935.js"><link rel="prefetch" href="/web-interview/assets/js/45.6826cc0b.js"><link rel="prefetch" href="/web-interview/assets/js/46.db7cb988.js"><link rel="prefetch" href="/web-interview/assets/js/47.31889365.js"><link rel="prefetch" href="/web-interview/assets/js/48.38914b82.js"><link rel="prefetch" href="/web-interview/assets/js/49.c6e03944.js"><link rel="prefetch" href="/web-interview/assets/js/5.3f86d238.js"><link rel="prefetch" href="/web-interview/assets/js/50.e4ab1e4e.js"><link rel="prefetch" href="/web-interview/assets/js/51.c3940fad.js"><link rel="prefetch" href="/web-interview/assets/js/52.3f7cb4cf.js"><link rel="prefetch" href="/web-interview/assets/js/53.a046a94b.js"><link rel="prefetch" href="/web-interview/assets/js/54.179968ab.js"><link rel="prefetch" href="/web-interview/assets/js/55.407806bd.js"><link rel="prefetch" href="/web-interview/assets/js/56.8bf00853.js"><link rel="prefetch" href="/web-interview/assets/js/57.670c6f7f.js"><link rel="prefetch" href="/web-interview/assets/js/58.0bc2edd1.js"><link rel="prefetch" href="/web-interview/assets/js/59.2941cb80.js"><link rel="prefetch" href="/web-interview/assets/js/6.aab8a02b.js"><link rel="prefetch" href="/web-interview/assets/js/60.a42c8811.js"><link rel="prefetch" href="/web-interview/assets/js/61.1c610aea.js"><link rel="prefetch" href="/web-interview/assets/js/7.6af95a3f.js"><link rel="prefetch" href="/web-interview/assets/js/8.151df366.js"><link rel="prefetch" href="/web-interview/assets/js/9.63a2b1aa.js">
    <link rel="stylesheet" href="/web-interview/assets/css/0.styles.884e11ce.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/web-interview/" class="home-link router-link-active"><!----> <span class="site-name">web面试题精选</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端面试题" class="dropdown-title"><span class="title">前端面试题</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端面试题" class="mobile-dropdown-title"><span class="title">前端面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-interview/1.front-end/1.html/1.index.html" class="nav-link">
  一.HTML
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/1.front-end/2.css/1.index.html" class="nav-link">
  二.CSS
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/1.front-end/3.javascript/1.index.html" class="nav-link">
  三.JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/1.front-end/4.browser/1.index.html" class="nav-link">
  四.浏览器
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/1.front-end/5.vue/1.index.html" class="nav-link">
  五.Vue
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/1.front-end/6.react/1.index.html" class="nav-link">
  六.React
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/1.front-end/7.webpack/1.index.html" class="nav-link">
  七.Webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端面试题" class="dropdown-title"><span class="title">后端面试题</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端面试题" class="mobile-dropdown-title"><span class="title">后端面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-interview/2.back-end/1.node.html" class="nav-link">
  一.Node
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/2.back-end/2.express.html" class="nav-link">
  二.Express
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/2.back-end/3.koa.html" class="nav-link">
  三.Koa
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/2.back-end/4.egg.html" class="nav-link">
  四.Egg
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大厂面试题" class="dropdown-title"><span class="title">大厂面试题</span> <span class="arrow down"></span></button> <button type="button" aria-label="大厂面试题" class="mobile-dropdown-title"><span class="title">大厂面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/阿里巴巴.html" class="nav-link">
  阿里巴巴
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/饿了么.html" class="nav-link">
  饿了么
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/百分点.html" class="nav-link">
  百分点
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/宝宝树.html" class="nav-link">
  宝宝树
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/滴滴.html" class="nav-link">
  滴滴
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/兑吧.html" class="nav-link">
  兑吧
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/宝海风教育.html" class="nav-link">
  海风教育
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/海康威视.html" class="nav-link">
  海康威视
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/沪江.html" class="nav-link">
  沪江
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/今日头条.html" class="nav-link">
  今日头条
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/酷家乐.html" class="nav-link">
  酷家乐
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/蘑菇街.html" class="nav-link">
  蘑菇街
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/寺库.html" class="nav-link">
  寺库
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/挖财.html" class="nav-link">
  挖财
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/网易.html" class="nav-link">
  网易
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/微医.html" class="nav-link">
  微医
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/喜马拉雅.html" class="nav-link">
  喜马拉雅
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/携程.html" class="nav-link">
  携程
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/有赞.html" class="nav-link">
  有赞
</a></li></ul></div></div><div class="nav-item"><a href="/web-interview/myInterview/20210131.html" class="nav-link">
  面试题
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端面试题" class="dropdown-title"><span class="title">前端面试题</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端面试题" class="mobile-dropdown-title"><span class="title">前端面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-interview/1.front-end/1.html/1.index.html" class="nav-link">
  一.HTML
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/1.front-end/2.css/1.index.html" class="nav-link">
  二.CSS
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/1.front-end/3.javascript/1.index.html" class="nav-link">
  三.JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/1.front-end/4.browser/1.index.html" class="nav-link">
  四.浏览器
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/1.front-end/5.vue/1.index.html" class="nav-link">
  五.Vue
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/1.front-end/6.react/1.index.html" class="nav-link">
  六.React
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/1.front-end/7.webpack/1.index.html" class="nav-link">
  七.Webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端面试题" class="dropdown-title"><span class="title">后端面试题</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端面试题" class="mobile-dropdown-title"><span class="title">后端面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-interview/2.back-end/1.node.html" class="nav-link">
  一.Node
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/2.back-end/2.express.html" class="nav-link">
  二.Express
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/2.back-end/3.koa.html" class="nav-link">
  三.Koa
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/2.back-end/4.egg.html" class="nav-link">
  四.Egg
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大厂面试题" class="dropdown-title"><span class="title">大厂面试题</span> <span class="arrow down"></span></button> <button type="button" aria-label="大厂面试题" class="mobile-dropdown-title"><span class="title">大厂面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/阿里巴巴.html" class="nav-link">
  阿里巴巴
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/饿了么.html" class="nav-link">
  饿了么
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/百分点.html" class="nav-link">
  百分点
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/宝宝树.html" class="nav-link">
  宝宝树
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/滴滴.html" class="nav-link">
  滴滴
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/兑吧.html" class="nav-link">
  兑吧
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/宝海风教育.html" class="nav-link">
  海风教育
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/海康威视.html" class="nav-link">
  海康威视
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/沪江.html" class="nav-link">
  沪江
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/今日头条.html" class="nav-link">
  今日头条
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/酷家乐.html" class="nav-link">
  酷家乐
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/蘑菇街.html" class="nav-link">
  蘑菇街
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/寺库.html" class="nav-link">
  寺库
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/挖财.html" class="nav-link">
  挖财
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/网易.html" class="nav-link">
  网易
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/微医.html" class="nav-link">
  微医
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/喜马拉雅.html" class="nav-link">
  喜马拉雅
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/携程.html" class="nav-link">
  携程
</a></li><li class="dropdown-item"><!----> <a href="/web-interview/largeFactories/有赞.html" class="nav-link">
  有赞
</a></li></ul></div></div><div class="nav-item"><a href="/web-interview/myInterview/20210131.html" class="nav-link">
  面试题
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/web-interview/1.front-end/3.javascript/1.index.html" class="sidebar-link">JavaScript</a></li><li><a href="/web-interview/1.front-end/3.javascript/1.base.html" class="sidebar-link">一.JS 基础</a></li><li><a href="/web-interview/1.front-end/3.javascript/2.senior.html" class="sidebar-link">二.JS 高级</a></li><li><a href="/web-interview/1.front-end/3.javascript/3.es6.html" class="sidebar-link">三.ES6 知识点</a></li><li><a href="/web-interview/1.front-end/3.javascript/4.safe.html" aria-current="page" class="active sidebar-link">四.前端安全</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-interview/1.front-end/3.javascript/4.safe.html#_1-跨域" class="sidebar-link">1.跨域</a></li><li class="sidebar-sub-header"><a href="/web-interview/1.front-end/3.javascript/4.safe.html#_2-xss" class="sidebar-link">2.XSS</a></li><li class="sidebar-sub-header"><a href="/web-interview/1.front-end/3.javascript/4.safe.html#_3-csrf" class="sidebar-link">3.CSRF</a></li><li class="sidebar-sub-header"><a href="/web-interview/1.front-end/3.javascript/4.safe.html#_4-点击劫持" class="sidebar-link">4.点击劫持</a></li><li class="sidebar-sub-header"><a href="/web-interview/1.front-end/3.javascript/4.safe.html#_5-中间人攻击" class="sidebar-link">5.中间人攻击</a></li><li class="sidebar-sub-header"><a href="/web-interview/1.front-end/3.javascript/4.safe.html#_6-前端安全问题" class="sidebar-link">6.前端安全问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-interview/1.front-end/3.javascript/4.safe.html#_1-xss-将代码注入网页中" class="sidebar-link">1.XSS：将代码注入网页中</a></li><li class="sidebar-sub-header"><a href="/web-interview/1.front-end/3.javascript/4.safe.html#_2-csrf-跨站请求伪造" class="sidebar-link">2.CSRF:跨站请求伪造</a></li></ul></li><li class="sidebar-sub-header"><a href="/web-interview/1.front-end/3.javascript/4.safe.html#_7-常见的-web-安全及防护原理" class="sidebar-link">7.常见的 web 安全及防护原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-interview/1.front-end/3.javascript/4.safe.html#_1-sql-注入原理" class="sidebar-link">1.sql 注入原理：</a></li><li class="sidebar-sub-header"><a href="/web-interview/1.front-end/3.javascript/4.safe.html#_2-xss-跨站脚本攻击" class="sidebar-link">2.xss（跨站脚本攻击）：</a></li><li class="sidebar-sub-header"><a href="/web-interview/1.front-end/3.javascript/4.safe.html#_3-csrf-跨站请求伪造" class="sidebar-link">3.csrf(跨站请求伪造)：</a></li><li class="sidebar-sub-header"><a href="/web-interview/1.front-end/3.javascript/4.safe.html#xss-和-csrf-的区别" class="sidebar-link">xss 和 csrf 的区别：</a></li></ul></li></ul></li><li><a href="/web-interview/1.front-end/3.javascript/5.performance.html" class="sidebar-link">五.性能优化</a></li><li><a href="/web-interview/1.front-end/3.javascript/6.design.html" class="sidebar-link">六.设计模式</a></li><li><a href="/web-interview/1.front-end/3.javascript/7.monitor.html" class="sidebar-link">七.前端监控</a></li><li><a href="/web-interview/1.front-end/3.javascript/8.algorithm.html" class="sidebar-link">八.前端算法</a></li><li><a href="/web-interview/1.front-end/3.javascript/9.handle.html" class="sidebar-link">九.前端手写</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="四-前端安全"><a href="#四-前端安全" class="header-anchor">#</a> 四.前端安全</h1> <h2 id="_1-跨域"><a href="#_1-跨域" class="header-anchor">#</a> 1.跨域</h2> <ul><li><p>什么是跨域</p> <ul><li>同源策略：协议，端口，域名要相同</li> <li>由于浏览器同源策略，凡是发送请求 url 的协议、域名、端口三者之间任意一种与当前页面地址不同即为跨域</li></ul></li> <li><p>跨域的十种方式</p> <ul><li>1.降级浏览器</li> <li>2.jsonp</li> <li>3.cors</li> <li>4.node 中间件：proxy-middlewire</li> <li>5.nginx：配置代理服务将后端请转发给前端</li> <li>6.websockit:是 HTML5 一种新的协议。它实现了浏览器与服务器全双工通信，同时允许跨域通讯，是 server push 技术的一种很好的实现。</li> <li>7.postmessage:h5 跨域方法 frame.contentWindow.postMessage,e.data;e.data,e.source.postMesage</li> <li>8.localhost.hash:c 页面动态创建 b 页面，请求里面有参数，b 页面 window.parent.parent.location.hash=location.hash,a 通过 location.hash 拿到参数</li> <li>9.document.name：proxy 一个空的代理页面，被访问的页面动态切换 iframe 页面域名，name 没有消失，frame.contentWindow.name,window.name</li> <li>10.document.domain:主域名相同，docuemnt.domain 强制设置主域，freame.contentWindow,window.parent</li></ul></li></ul> <h2 id="_2-xss"><a href="#_2-xss" class="header-anchor">#</a> 2.XSS</h2> <blockquote><p>什么是 XSS 攻击？如何防范 XSS 攻击？什么是 CSP?</p></blockquote> <ul><li>XSS 攻击有哪些类型
<ul><li>存储型</li> <li>反射型</li> <li>DOM 型</li></ul></li> <li>如何防御 XSS 攻击
<ul><li>输入检查</li> <li>设置 httpOnly</li> <li>开启 CSP</li></ul></li></ul> <p><strong>转义字符</strong>
首先，对于用户的输入应该是永远不信任的。最普通的做法就是转义输入输出的内容，对于引号、尖括号、斜杠进行转义。</p> <p>但是对于显示富文本来说，显然不能通过上面的办法来转义所有的字符，因为这样会把需要的格式也过滤掉。对于这种情况，通常采用白名单过滤的办法，当然也可以通过黑名单过滤，但是考虑到需要过滤的标签和标签属性实在太多，更加推荐白名单的方式。</p> <p><strong>CSP</strong>
CSP 本质就是建立白名单，开发者明确告诉浏览器哪些外部资源可以加载和执行。我们只需要配置规则，如何拦截是由浏览器自己实现的。我们可以通过这种方式来尽量减少 XSS 攻击。</p> <p>通常可以通过两种方式来开启 CSP:</p> <p>1.设置 HTTP Header 中的<code>Content-Security-Policy</code></p> <p>2.设置<code>meta</code>标签的方式<code>&lt;meta http-equiv=&quot;Content-Securiry-Policy&quot;&gt;</code></p> <p>这里以设置 HTTP Header 来举例</p> <ul><li>只允许加载本站资源</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Content<span class="token operator">-</span>Security<span class="token operator">-</span>Policy<span class="token operator">:</span><span class="token keyword">default</span><span class="token operator">-</span>src <span class="token string">'self'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>只允许加载 HTTPS 协议图片</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>Content-Security-Policy:img-src https://*
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>允许加载任何来源框架</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Content<span class="token operator">-</span>Security<span class="token operator">-</span>Policy<span class="token operator">:</span>child<span class="token operator">-</span>src <span class="token string">'none'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>对于这种方式来说，只要开发者配置了正确的规则，那么即使网站存在漏洞，攻击者也不能执行它的攻击代码，并且 CSP 的兼容性也不错。</p> <h2 id="_3-csrf"><a href="#_3-csrf" class="header-anchor">#</a> 3.CSRF</h2> <blockquote><p>什么是 CSRF 攻击?如何防范 CSRF 攻击?</p></blockquote> <p>CSRF 中文名为跨站请求伪造。原理即使攻击者构造出一个后端请求地址，诱导用户点击或者通过某些途径自动发起请求。如果用户是在登录状态下的话，后端就以为是用户在操作，从而进行相应的逻辑。</p> <p>举个例子，假如网站中有一个通过<code>GET</code>请求提交用户评论的接口，那么攻击者就可以在钓鱼网站中加入一个图片，图片的地址就是评论接口。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;http://www.domai.com/xxx?comment='attack'&quot;</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>那么你也是否会想到使用<code>POST</code>方式提交请求是不是就没有这个问题了呢？其实并不是，使用这种方式也不是百分百安全，攻击者同样可以诱导用户进入某个页面，在页面个中通过表单提交<code>POST</code>请求。
<strong>如何防御</strong></p> <p>防范 CSRF 攻击可以遵循以下几种规则：</p> <p>1、Get 请求不对数据进行修改</p> <p>2、不让第三方网站访问到用户 Cookie</p> <p>3、阻止第三方网站请求接口</p> <p>4、请求时附带验证信息，比如验码或者 Token</p> <p><strong>SameSite</strong></p> <p>可以对 Cookie 设置<code>SameSite</code>属性。该属性表示 Cookie 不随着跨域请求发送，可以很大程度减少 CSRF 的攻击，但是该属性目前并不是所有浏览器都兼容。</p> <p><strong>验证 Referer</strong></p> <p>对于需要防范 CSRF 的请求，我们可以通过验证 Referer 来判断该请求是否为第三方网站发起的</p> <p><strong>Token</strong></p> <p>服务器下发一个随机 Token,每次发起请求时将 Token 携带上，服务器验证 Token 是否有效。</p> <h2 id="_4-点击劫持"><a href="#_4-点击劫持" class="header-anchor">#</a> 4.点击劫持</h2> <blockquote><p>什么是点击劫持？如何防范点击劫持？</p></blockquote> <p>点击劫持是一种视觉欺骗的攻击手段。攻击者将需要攻击的网站通过<code>iframe</code>嵌套的方式嵌入自己的网页中，并将<code>iframe</code>设置为透明，在页面中透出一个按钮诱导用户点击。</p> <p>对于这种攻击方式，推荐防御的方法有两种。
<strong>X-FRAME-OPTIONS</strong></p> <p><code>X-FRAME-OPTIONS</code>是一个 HTTP 响应头，在现代浏览器有一个很好的支持。这个 HTTP 响应头就是为了防御用<code>iframe</code>嵌套的点击劫持攻击。</p> <p>该响应头有三个值可选，分别是</p> <ul><li><code>DENY</code>,表示页面不允许通过<code>iframe</code>的方式展示</li> <li><code>SAMEOPIGIN</code>,表示页面可以在相同域名下通过<code>iframe</code>的方式展示</li> <li><code>ALLOW-FROM</code>,表示页面可以在指定来源的<code>iframe</code>中展示</li></ul> <h2 id="_5-中间人攻击"><a href="#_5-中间人攻击" class="header-anchor">#</a> 5.中间人攻击</h2> <blockquote><p>什么是中间人攻击？如何防范中间人攻击？</p></blockquote> <p>中间人攻击是攻击方同时与服务端和客户端建立起了连接，并让对方认为连接是安全的，但是实际上整个通信过程都被攻击者控制了。攻击者不仅能获得双方的通信信息，还能修改通信信息。</p> <p>通常来说不建议使用公共 Wi-Fi,因为很可能就会发生中间人攻击的情况。如果你在通信的过程中涉及到了某些敏感信息，就完全暴露给攻击方了。</p> <p>当然防御中间人攻击其实并不难，只需要增加一个安全通道来传输信息。HTTPS 就可以用来防御中间人攻击，但是并不是说使用了 HTTPS 就可以高枕无忧了，因为如果你没有完全关闭 HTTP 访问的话，攻击方可以通过某些方式将 HTTPS 降级为 HTTP 从而实现中间人攻击。</p> <h2 id="_6-前端安全问题"><a href="#_6-前端安全问题" class="header-anchor">#</a> 6.前端安全问题</h2> <h3 id="_1-xss-将代码注入网页中"><a href="#_1-xss-将代码注入网页中" class="header-anchor">#</a> 1.XSS：将代码注入网页中</h3> <ul><li>持久型：攻击代码写入数据库</li> <li>非持久型：一般通过修改 URL 参数的方式攻击，诱导用户点击链接</li></ul> <h4 id="防范"><a href="#防范" class="header-anchor">#</a> 防范：</h4> <ul><li><p>转义字符</p></li> <li><p>使用白名单（CSP）</p> <ul><li>设置 HTTP Header 中的<code>Content-Security-Policy</code></li> <li>设置<code>meta</code>标签的方式<code>&lt;meta http-equiv=&quot;Content-Security-Policy&quot;&gt;</code></li></ul> <p>CSRF：是跨站请求伪造，很明显根据刚刚的解释，他的核心也就是请求伪造，通过伪造身份提交 POST 和 GET 请求来进行跨域的攻击。</p></li></ul> <h3 id="_2-csrf-跨站请求伪造"><a href="#_2-csrf-跨站请求伪造" class="header-anchor">#</a> 2.CSRF:跨站请求伪造</h3> <p>攻击者构造一个后端请求地址，诱导用户点击或者通过某些途径自动发起请求，如果用过是在登录状态下的话，后端就一位是用户在操作</p> <h4 id="防范-2"><a href="#防范-2" class="header-anchor">#</a> 防范</h4> <ul><li><p>Get 请求不对数据进行修改</p></li> <li><p>不让第三方网站访问到用户 Cookie</p></li> <li><p>阻止第三方网站请求接口</p></li> <li><p>请求时附带验证信息，比如验证码或者 Token</p></li> <li><p>可以对 Cookie 设置 Samesite:Cookie 不随着跨域请求发送</p></li> <li><p>referer</p> <p><strong>完成 CSRF 需要两个步骤：</strong></p> <p>1.登陆受信任的网站 A，在本地生成 COOKIE</p> <p>2.在不登出 A 的情况下，或者本地 COOKIE 没有过期的情况下，访问危险网站 B。</p></li></ul> <p>xss 跨站脚本攻击，主要是前端层面的，用户在输入层面插入攻击脚本，改变页面的显示，或则窃取网站 cookie，预防方法：不相信用户的所有操作，对用户输入进行一个转义，不允许 js 对 cookie 的读写</p> <p>csrf 跨站请求伪造，以你的名义，发送恶意请求，通过 cookie 加参数等形式过滤</p> <h2 id="_7-常见的-web-安全及防护原理"><a href="#_7-常见的-web-安全及防护原理" class="header-anchor">#</a> 7.常见的 web 安全及防护原理</h2> <h3 id="_1-sql-注入原理"><a href="#_1-sql-注入原理" class="header-anchor">#</a> 1.sql 注入原理：</h3> <p>通过 sql 命令插入到 web 表单提交或者输入活命，达到欺骗服务器执行的恶意 sql 命令</p> <h3 id="_2-xss-跨站脚本攻击"><a href="#_2-xss-跨站脚本攻击" class="header-anchor">#</a> 2.xss（跨站脚本攻击）：</h3> <p>往 web 页面插入恶意的 html 标签或者 js 代码</p> <h3 id="_3-csrf-跨站请求伪造"><a href="#_3-csrf-跨站请求伪造" class="header-anchor">#</a> 3.csrf(跨站请求伪造)：</h3> <p>通过伪装来自受信任用户的请求</p> <h3 id="xss-和-csrf-的区别"><a href="#xss-和-csrf-的区别" class="header-anchor">#</a> xss 和 csrf 的区别：</h3> <ul><li>1.xss 是获取信息，不需要提前知道其他用户页面的代码和数据包</li> <li>2.csrf 代替用户完成指定的动作，需要知道其他页面的代码和数据包</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/6/29 上午12:09:44</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/web-interview/1.front-end/3.javascript/3.es6.html" class="prev">
        三.ES6 知识点
      </a></span> <span class="next"><a href="/web-interview/1.front-end/3.javascript/5.performance.html">
        五.性能优化
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/web-interview/assets/js/app.7e1cd45a.js" defer></script><script src="/web-interview/assets/js/2.e1d7530f.js" defer></script><script src="/web-interview/assets/js/19.8df8bad8.js" defer></script><script src="/web-interview/assets/js/4.2abc1bb0.js" defer></script>
  </body>
</html>
