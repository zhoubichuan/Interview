## 2.ajax（异步的 javascript 和 xml）

* ajax 原理：相当于在用户和服务器之间加一个中间层（ajax 引擎），使用户操作与服务器响应异步化

- 优点：在不刷新整个页面的前提下与服务器通信维护数据；可以把前端服务器的任务转嫁到客户端来处理；减轻服务器负担，节省宽带
- 劣势：不支持 back，对搜索引擎的支持比较弱，不容易调试
- 怎么解决呢：通过 location.hash 值来解决 ajax 过程中导致的浏览器前进后退按钮失效问题
- 怎么解决以前被人们常遇到的重复加载问题。主要比较前后的 hash 值，看其是否相等，再判断是否触发 ajax

```
let getDate = (method, url, content) = >
new Promise((resolve, reject) = > {
  letxhr = new XMLHttpRequest()
  xhr.open(method, url)
  xhr.send(content)
  xhr.onreadystatechange = () = > {
    if (xhr.readyState === 4 && xhr.status === 200) {
      resolve(xhr.response)
    }
  }
})
```

* ajax 状态码
  * 0 （未初始化）还没有调用 send()方法
  * 1 （载入）已调用 send()方法，正在发送请求
  * 2 （载入完成）send()方法执行完毕
  * 3 （交互）正在解析相应的内容
  * 4 （完成）响应内容解析完成，可以在客户端调用了
