## 14. setState

* setState 通过一队列机制实现 state 更新，当执行 setState 时，会将需要更新的 state 往后放入状态队列
* 那么该 state 将不会被放入状态队列中。当下次调用 setState 并对状态队列进行合并时，就会忽略之前修改的 state，造成不可预知的错误
* 同时，也利用了队列机制实现了 setState 的异步更新，避免了频繁的重复更新 state

- 同步更新 state:

  * setState 函数并不会阻塞等待状态更新完毕，因此 setNetworkActivityIndicatoryViseible 有可能先于数据渲染完毕就执行。第二个参数是一个回调函数，在 setState 的异步操作结束并且组件已经重新渲染的时候执行，也就是说，我们可以通过这个回调来拿到更新的 state 的值，实现代码的同步
  * 例子

  ```
  componentDidMount(){
      fetch('http://localhost:3000')
      .then(res=>res.json())
      .then(data=>{
          this.setState({data:data})
      })
  }
  StatusBar.setNetworkActivityIndicatorVisible(false)
  ```
