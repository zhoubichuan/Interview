## 介绍下 MVVM（数据的双向绑定）

- M：model 数据模型
- V：view 界面
- MV:作为桥梁负责沟通 view 跟 model
- 只关心数据的流传，减少强耦合性。最关键的就是数据的双向绑定
- 关键步骤：
- 1.实现数据监听器 Observer,用 object.defineProperty()重写数据的 get/set。值更新就在 set 中通知订阅者更新数据。
- 2.实现模板编译 compile,深度遍历 dom 树，对每个元素节点的指令模板替换数据以及订阅数据。
- 3.实现 watch 用于连接 Observer 和 compile,能够订阅并接受每一个属性的变动的通知，执行指令绑定的相应的回调函数，从而更新数据
- mvc 和 mvvm 其实区别并不大。都是一种设计思想。主要是 mvc 中 Controller 演变成 mvvm 中的 viewModel，mvvm 主要解决了 mvc 中大量的 dom 操作使页面渲染性能降低。

## Vue 实现数据双向绑定的原理：

Object.defineProperty()

vue 实现数据双向绑定主要是：采用数据劫持结合发布者-订阅者模式的方式，通过 Object.defineProperty() 来劫持各个属性的 setter，getter，在数据变动时发布消息给订阅者，触发相应监听回调。当把一个普通 Javascript 对象传给 Vue 实例来作为它的 data 选项时，Vue 将遍历它的属性，用 Object.defineProperty() 将它们转为 getter/setter。用户看不到 getter/setter，但是在内部它们让 Vue 追踪依赖，在属性被访问和修改时通知变化。

vue 的数据双向绑定 将 MVVM 作为数据绑定的入口，整合 Observer，Compile 和 Watcher 三者，通过 Observer 来监听自己的 model 的数据变化，通过 Compile 来解析编译模板指令（vue 中是用来解析 {{}}），最终利用 watcher 搭起 observer 和 Compile 之间的通信桥梁，达到数据变化 —>视图更新；视图交互变化（input）—>数据 model 变更双向绑定效果。
